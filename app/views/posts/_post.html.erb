<div class="post card mb-3">
  <% if post.image.attached? %>
    <img src="<%= url_for(post.image)%>" class="post__image card-img-top">
  <% end %>

  <div class="card-body">
    <p class="card-text">
      <% if post.user %>
        <b>
          <%= link_to '@' + post.user.username, user_path(post.user) %>
        </b>
      <% end %>

      <small class="post__time text-muted">
        <%= time_ago_in_words(post.created_at) %> ago
      </small>

      <%= link_to(like_post_path(post), method: :post, class: "post__like-btn btn btn-outline-dark") do %>
        <% if post.liked_by_user?(get_current_user) %>
          <i class="material-icons post__heart_liked">favorite</i>
        <% else %>
          <i class="material-icons">favorite_border</i>
        <% end %>
        <%= post.liked_by.count %>
      <% end %>
    </p>

    <p class="card-text">
      <%= post.description %>
    </p>

    <% if is_logged_in? && post.user == get_current_user %>
      <div class="post__edit-btn btn-float-dropdown dropdown">
        <button aria-expanded="false"
                aria-haspopup="true"
                class="btn btn-float btn-secondary btn-sm"
                data-toggle="dropdown" type="button">
                <i class="material-icons">edit</i>
        </button>

        <div class="dropdown-menu">
          <%= link_to(edit_post_path(post), class: "btn btn-float btn-light btn-sm") do %>
            <i class="material-icons">edit</i>
          <% end %>
          <%= link_to(post,
                      method: :delete,
                      data: { confirm: 'Are you sure you want to delete this post?' },
                      class: "btn btn-float btn-danger btn-sm") do %>
            <i class="material-icons">delete</i>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
